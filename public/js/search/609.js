"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[609],{2609:(e,t,r)=>{r.r(t),r.d(t,{default:()=>R});var a=r(821),o={id:"root",style:{"padding-top":"30px"}},n={key:1,class:"container bg-blueGray-50 dark:bg-gray-900 max-h-full"},s={class:"text-black underline uppercase text-5xl my-4"},l=(0,a.createElementVNode)("hr",null,null,-1),c={class:"relative overflow-x-auto"},i={class:"w-full text-base text-left text-gray-500 dark:text-gray-400"},d=(0,a.createElementVNode)("thead",{class:"text-base text-gray-700 uppercase bg-transparent"},[(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("th",{scope:"col",class:"px-4 py-3 rounded-l-lg uppercase underline"}," Product name. "),(0,a.createElementVNode)("th",{scope:"col",class:"px-4 py-3 uppercase underline"}," Qty. "),(0,a.createElementVNode)("th",{scope:"col",class:"px-4 py-3 rounded-r-lg uppercase underline"}," Price. ")])],-1),u={class:"bg-white dark:bg-gray-800"},p={scope:"row",class:"flex items-center px-2 py-4 text-gray-900 whitespace-nowrap dark:text-white"},m=["src","alt"],h={class:"pl-3"},g={class:"text-base font-semibold uppercase underline"},f={class:"font-normal text-gray-500 uppercase"},y={class:"px-2 py-4"},x={class:"inline-flex rounded-md shadow-sm",role:"group"},b=["onClick"],k=[(0,a.createElementVNode)("i",{class:"fas fa-minus fa-xs px-1"},null,-1)],N={type:"button",class:"inline-flex items-center px-2 py-2 text-base font-medium text-gray-900 bg-transparent border border-gray-900 hover:bg-gray-900 hover:text-white focus:z-10 dark:border-white dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:bg-gray-700 cursor-auto"},C=["onClick"],v=[(0,a.createElementVNode)("i",{class:"fas fa-plus fa-xs px-1"},null,-1)],E={class:"px-2 py-4 text-black"},V=["onClick"],w=[(0,a.createElementVNode)("i",{class:"fas fa-times px-1"},null,-1)],_={class:"font-normal uppercase underline text-2xl text-gray-900 dark:text-white"},B=(0,a.createElementVNode)("th",{scope:"row",class:"px-2 py-3"},"Total.",-1),T={class:"px-2 py-3"},S={class:"px-2 py-3"},q={class:"relative"};const I={props:[],data:function(){return{isloading:!0,user:{},cartItems:[],cartTotal:"",cartItemsNo:"",fields:{},btnClass:"mx-1 inline-flex items-center px-1 py-1 text-xs font-medium text-gray-900 bg-transparent border border-gray-900 hover:bg-gray-900 hover:text-white focus:z-10  dark:border-white dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:bg-gray-700",addBtnClass:"",minusBtnClass:""}},components:{flash:r(1266).Z},beforeMount:function(){this.isloading=!0,this.getUser(),this.getCartItems()},methods:{loaded:function(){this.isloading=!1,setTimeout(this.scrollTo,600)},scrollTo:function(){window.scrollTo(0,1),window.scrollTo(0,0)},getUser:function(){var e=this;axios.get("/getUser/").then((function(t){var r=t.data;e.user=r[0]}))},getCartItems:function(){var e=this,t=this.$route.params.id;axios.get("/api/getCartIndex/"+t).then((function(t){var r=t.data;e.cartItems=r[0],e.cartTotal=r[1],e.cartItemsNo=r[2],e.loaded()}))},productTotal:function(e){var t=e.product_quantity*e.product_price;return Number(t).toLocaleString()},quantity:function(e){var t=e.product_quantity;return e.product_quantity==e.product_stock?this.addBtnClass="cursor-not-allowed":this.addBtnClass="cursor-pointer",e.product_quantity<=1?this.minusBtnClass="cursor-not-allowed":this.minusBtnClass="cursor-pointer",t},addQuantity:function(e){if(e.product_quantity==e.product_stock)this.flashMessage="Maximum No of Stock Reached!",this.$refs.childComponentRef.flash([this.flashMessage,"bg-red-100 dark:bg-red-900"]);else{var t=Number(e.product_quantity)+1;this.fields.product_quantity=t,console.log(t),this.editQty(e.id)}},minusQuantity:function(e){if(1==e.product_quantity)this.flashMessage="Minimum No. Reached!",this.$refs.childComponentRef.flash([this.flashMessage,"bg-red-100 dark:bg-red-900"]);else{var t=e.product_quantity-1;this.fields.product_quantity=t,console.log(t),this.editQty(e.id)}},editQty:function(e){var t=this;axios.put("/cart/edit/"+e,this.fields).then((function(e){t.getCartItems(),t.flashMessage="Quantity Edit Success!",t.$refs.childComponentRef.flash([t.flashMessage,"bg-green-100 dark:bg-green-900"])}))},removeFromCart:function(e){var t=this;confirm("ARE YOU SURE YOU WANT TO REMOVE: "+e.product_name+" FROM THE CART?")&&axios.get("/cart/remove/"+e.product_id).then((function(e){t.getCartItems();t.$emit("cartinfo",t.user),t.$refs.childComponentRef.flash(["Item removed from cart!","bg-red-100 dark:bg-red-900"])}))}}};const R=(0,r(3744).Z)(I,[["render",function(e,t,r,I,R,M){var Q=this,D=(0,a.resolveComponent)("flash"),L=(0,a.resolveComponent)("loading-body"),U=(0,a.resolveComponent)("router-link");return(0,a.openBlock)(),(0,a.createElementBlock)("div",o,[(0,a.createVNode)(D,{ref:"childComponentRef"},null,512),1==R.isloading?((0,a.openBlock)(),(0,a.createBlock)(L,{key:0})):((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createElementVNode)("h2",s,"View cart ("+(0,a.toDisplayString)(Number(this.cartItemsNo).toLocaleString())+" Items. )",1),l,(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("table",i,[d,(0,a.createElementVNode)("tbody",null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(R.cartItems,(function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("tr",u,[(0,a.createElementVNode)("th",p,[(0,a.createVNode)(U,{to:"/product_show/"+e.product_id},{default:(0,a.withCtx)((function(){return[(0,a.createElementVNode)("img",{class:"w-10 h-10 rounded",src:e.thumbnail_path,alt:e.product_name},null,8,m)]})),_:2},1032,["to"]),(0,a.createElementVNode)("div",h,[(0,a.createElementVNode)("div",g,[(0,a.createVNode)(U,{to:"/product_show/"+e.product_id},{default:(0,a.withCtx)((function(){return[(0,a.createTextVNode)((0,a.toDisplayString)(t+1)+". "+(0,a.toDisplayString)(e.product_name),1)]})),_:2},1032,["to"])]),(0,a.createElementVNode)("div",f,"ksh "+(0,a.toDisplayString)(Number(e.product_price).toLocaleString()),1)])]),(0,a.createElementVNode)("td",y,[(0,a.createElementVNode)("div",x,[M.quantity(e)>=1?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:0,type:"button",class:(0,a.normalizeClass)([Q.btnClass,Q.minusBtnClass]),onClick:function(t){return M.minusQuantity(e)}},k,10,b)):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("button",N,(0,a.toDisplayString)(M.quantity(e)),1),M.quantity(e)>1||M.quantity(e)<e.product_stock?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:1,type:"button",class:(0,a.normalizeClass)([Q.btnClass,Q.addBtnClass]),onClick:function(t){return M.addQuantity(e)}},v,10,C)):(0,a.createCommentVNode)("",!0)])]),(0,a.createElementVNode)("td",E,[(0,a.createTextVNode)(" ksh "+(0,a.toDisplayString)(M.productTotal(e))+" ",1),(0,a.createElementVNode)("a",{class:"text-center uppercase text-red-600 font-normal text-base p-1 cursor-pointer",onClick:function(t){return M.removeFromCart(e)}},w,8,V)])])})),256))]),(0,a.createElementVNode)("tfoot",null,[(0,a.createElementVNode)("tr",_,[B,(0,a.createElementVNode)("td",T,(0,a.toDisplayString)(Number(this.cartItemsNo).toLocaleString())+" Items.",1),(0,a.createElementVNode)("td",S,"ksh "+(0,a.toDisplayString)(Number(this.cartTotal).toLocaleString())+".",1)])])])]),(0,a.createElementVNode)("div",q,[(0,a.createVNode)(U,{to:"/checkout/"+R.user.id,class:"w-full block text-center uppercase text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-900 hover:text-white focus:ring-4 focus:ring-gray-200 font-medium text-lg px-5 py-2.5 mr-2 mb-2 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700 cursor-pointer shadow"},{default:(0,a.withCtx)((function(){return[(0,a.createTextVNode)(" Checkout ")]})),_:1},8,["to"])])]))])}]])}}]);